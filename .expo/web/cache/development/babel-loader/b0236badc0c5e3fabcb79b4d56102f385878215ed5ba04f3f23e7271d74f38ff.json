{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React from 'react';\nimport { useEffect, useRef, useState } from \"react\";\nimport { useNavigation } from \"@react-navigation/native\";\nimport View from \"react-native-web/dist/exports/View\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport { HouseLine, Trash } from \"phosphor-react-native\";\nimport Animated, { Layout, SlideInRight, SlideOutRight } from \"react-native-reanimated\";\nimport { Swipeable } from \"react-native-gesture-handler\";\nimport { Header } from \"../../components/Header\";\nimport { HistoryCard } from \"../../components/HistoryCard\";\nimport { styles } from \"./styles\";\nimport { historyGetAll, historyRemove } from \"../../storage/quizHistoryStorage\";\nimport { Loading } from \"../../components/Loading\";\nimport { THEME } from \"../../styles/theme\";\nimport { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nexport function History() {\n  var _useState = useState(true),\n    _useState2 = _slicedToArray(_useState, 2),\n    isLoading = _useState2[0],\n    setIsLoading = _useState2[1];\n  var _useState3 = useState([]),\n    _useState4 = _slicedToArray(_useState3, 2),\n    history = _useState4[0],\n    setHistory = _useState4[1];\n  var swipeableRefs = useRef([]);\n  var _useNavigation = useNavigation(),\n    goBack = _useNavigation.goBack;\n  function fetchHistory() {\n    return _fetchHistory.apply(this, arguments);\n  }\n  function _fetchHistory() {\n    _fetchHistory = _asyncToGenerator(function* () {\n      var response = yield historyGetAll();\n      setHistory(response);\n      setIsLoading(false);\n    });\n    return _fetchHistory.apply(this, arguments);\n  }\n  function remove(_x) {\n    return _remove.apply(this, arguments);\n  }\n  function _remove() {\n    _remove = _asyncToGenerator(function* (id) {\n      yield historyRemove(id);\n      fetchHistory();\n    });\n    return _remove.apply(this, arguments);\n  }\n  function handleRemove(id, index) {\n    var _swipeableRefs$curren;\n    (_swipeableRefs$curren = swipeableRefs.current) == null ? void 0 : _swipeableRefs$curren[index].close();\n    Alert.alert(\"Remover\", \"Deseja remover esse registro?\", [{\n      text: \"Sim\",\n      onPress: function onPress() {\n        return remove(id);\n      }\n    }, {\n      text: \"Não\",\n      style: \"cancel\"\n    }]);\n  }\n  useEffect(function () {\n    fetchHistory();\n  }, []);\n  if (isLoading) {\n    return _jsx(Loading, {});\n  }\n  return _jsxs(View, {\n    style: styles.container,\n    children: [_jsx(Header, {\n      title: \"Hist\\xF3rico\",\n      subtitle: `Seu histórico de estudos${\"\\n\"}realizados`,\n      icon: HouseLine,\n      onPress: goBack\n    }), _jsx(ScrollView, {\n      contentContainerStyle: styles.history,\n      showsVerticalScrollIndicator: false,\n      children: history.map(function (item, index) {\n        return _jsx(Animated.View, {\n          entering: SlideInRight,\n          exiting: SlideOutRight,\n          layout: Layout.springify(),\n          children: _jsx(Swipeable, {\n            ref: function ref(_ref) {\n              if (_ref) {\n                swipeableRefs.current.push(_ref);\n              }\n            },\n            containerStyle: styles.swipeContainer,\n            renderLeftActions: function renderLeftActions() {\n              return _jsx(View, {\n                style: styles.swipeRemove,\n                children: _jsx(Trash, {\n                  size: 32,\n                  color: THEME.COLORS.GREY_100\n                })\n              });\n            },\n            renderRightActions: function renderRightActions() {\n              return null;\n            },\n            overshootLeft: false,\n            leftThreshold: 10,\n            onSwipeableOpen: function onSwipeableOpen() {\n              return handleRemove(item.id, index);\n            },\n            children: _jsx(HistoryCard, {\n              data: item\n            })\n          })\n        }, item.id);\n      })\n    })]\n  });\n}","map":{"version":3,"names":["React","useEffect","useRef","useState","useNavigation","View","ScrollView","Alert","HouseLine","Trash","Animated","Layout","SlideInRight","SlideOutRight","Swipeable","Header","HistoryCard","styles","historyGetAll","historyRemove","Loading","THEME","jsx","_jsx","jsxs","_jsxs","History","_useState","_useState2","_slicedToArray","isLoading","setIsLoading","_useState3","_useState4","history","setHistory","swipeableRefs","_useNavigation","goBack","fetchHistory","_fetchHistory","apply","arguments","_asyncToGenerator","response","remove","_x","_remove","id","handleRemove","index","_swipeableRefs$curren","current","close","alert","text","onPress","style","container","children","title","subtitle","icon","contentContainerStyle","showsVerticalScrollIndicator","map","item","entering","exiting","layout","springify","ref","push","containerStyle","swipeContainer","renderLeftActions","swipeRemove","size","color","COLORS","GREY_100","renderRightActions","overshootLeft","leftThreshold","onSwipeableOpen","data"],"sources":["C:/quizApp-ReactNative/src/screens/History/index.tsx"],"sourcesContent":["import React from 'react';\nimport { useEffect, useRef, useState } from \"react\";\nimport { useNavigation } from \"@react-navigation/native\";\nimport { View, ScrollView, Alert } from \"react-native\";\nimport { HouseLine, Trash } from \"phosphor-react-native\";\nimport Animated, {\n  Layout,\n  SlideInRight,\n  SlideOutRight,\n} from \"react-native-reanimated\";\nimport { Swipeable } from \"react-native-gesture-handler\";\n\nimport { Header } from \"../../components/Header\";\nimport { HistoryCard, HistoryProps } from \"../../components/HistoryCard\";\n\nimport { styles } from \"./styles\";\nimport { historyGetAll, historyRemove } from \"../../storage/quizHistoryStorage\";\nimport { Loading } from \"../../components/Loading\";\nimport { THEME } from \"../../styles/theme\";\n\nexport function History() {\n  const [isLoading, setIsLoading] = useState(true);\n  const [history, setHistory] = useState<HistoryProps[]>([]);\n\n  const swipeableRefs = useRef<Swipeable[]>([]);\n\n  const { goBack } = useNavigation();\n\n  async function fetchHistory() {\n    const response = await historyGetAll();\n    setHistory(response);\n    setIsLoading(false);\n  }\n\n  async function remove(id: string) {\n    await historyRemove(id);\n\n    fetchHistory();\n  }\n\n  function handleRemove(id: string, index: number) {\n    swipeableRefs.current?.[index].close();\n\n    Alert.alert(\"Remover\", \"Deseja remover esse registro?\", [\n      {\n        text: \"Sim\",\n        onPress: () => remove(id),\n      },\n      { text: \"Não\", style: \"cancel\" },\n    ]);\n  }\n\n  useEffect(() => {\n    fetchHistory();\n  }, []);\n\n  if (isLoading) {\n    return <Loading />;\n  }\n\n  return (\n    <View style={styles.container}>\n      <Header\n        title=\"Histórico\"\n        subtitle={`Seu histórico de estudos${\"\\n\"}realizados`}\n        icon={HouseLine}\n        onPress={goBack}\n      />\n\n      <ScrollView\n        contentContainerStyle={styles.history}\n        showsVerticalScrollIndicator={false}\n      >\n        {history.map((item, index) => (\n          <Animated.View\n            key={item.id}\n            entering={SlideInRight}\n            exiting={SlideOutRight}\n            layout={Layout.springify()}\n          >\n            <Swipeable\n              ref={(ref) => {\n                if (ref) {\n                  swipeableRefs.current.push(ref);\n                }\n              }}\n              containerStyle={styles.swipeContainer}\n              renderLeftActions={() => (\n                <View style={styles.swipeRemove}>\n                  <Trash size={32} color={THEME.COLORS.GREY_100} />\n                </View>\n              )}\n              renderRightActions={() => null}\n              overshootLeft={false}\n              leftThreshold={10}\n              onSwipeableOpen={() => handleRemove(item.id, index)}\n            >\n              <HistoryCard data={item} />\n            </Swipeable>\n          </Animated.View>\n        ))}\n      </ScrollView>\n    </View>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}